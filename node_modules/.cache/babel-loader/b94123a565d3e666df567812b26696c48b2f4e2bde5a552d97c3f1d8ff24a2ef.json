{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jan\\\\Downloads\\\\Familien App\\\\src\\\\PhotoGallery.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { supabase } from './supabaseClient';\nimport { useNotifications } from './useNotifications';\nimport './PhotoGallery.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PhotoGallery({\n  user\n}) {\n  _s();\n  const {\n    sendNotification\n  } = useNotifications();\n  const [photos, setPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchPhotos = useCallback(async () => {\n    setLoading(true);\n    const {\n      data,\n      error\n    } = await supabase.storage.from('photos').list();\n    if (error) {\n      setError('Fehler beim Laden der Fotos.');\n      setPhotos([]);\n    } else {\n      const photoUrls = data.map(file => {\n        const {\n          data: {\n            publicUrl\n          }\n        } = supabase.storage.from('photos').getPublicUrl(file.name);\n        return {\n          ...file,\n          publicUrl\n        };\n      });\n      setPhotos(photoUrls);\n    }\n    setLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchPhotos();\n  }, [fetchPhotos]);\n  const handleUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const fileName = `${Date.now()}_${file.name}`;\n    const {\n      error: uploadError\n    } = await supabase.storage.from('photos').upload(fileName, file);\n    if (uploadError) {\n      setError('Fehler beim Hochladen des Fotos.');\n    } else {\n      sendNotification('Neues Foto in der Galerie', {\n        body: `${user.name} hat ein neues Foto hochgeladen.`\n      });\n      fetchPhotos();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"photo-gallery-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Fotogalerie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"photo-upload\",\n        className: \"upload-button\",\n        children: \"Foto hochladen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"photo-upload\",\n        type: \"file\",\n        onChange: handleUpload,\n        accept: \"image/*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Lade Fotos...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"photo-grid\",\n      children: photos.map(photo => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"photo-item\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: photo.publicUrl,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this)\n      }, photo.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(PhotoGallery, \"M/J/UzCC0fSiBCplQTY69Egu9uM=\", false, function () {\n  return [useNotifications];\n});\n_c = PhotoGallery;\nvar _c;\n$RefreshReg$(_c, \"PhotoGallery\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","supabase","useNotifications","jsxDEV","_jsxDEV","PhotoGallery","user","_s","sendNotification","photos","setPhotos","loading","setLoading","error","setError","fetchPhotos","data","storage","from","list","photoUrls","map","file","publicUrl","getPublicUrl","name","handleUpload","e","target","files","fileName","Date","now","uploadError","upload","body","className","children","_jsxFileName","lineNumber","columnNumber","htmlFor","id","type","onChange","accept","photo","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/Jan/Downloads/Familien App/src/PhotoGallery.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { supabase } from './supabaseClient';\nimport { useNotifications } from './useNotifications';\nimport './PhotoGallery.css';\n\nexport default function PhotoGallery({ user }) {\n  const { sendNotification } = useNotifications();\n  const [photos, setPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchPhotos = useCallback(async () => {\n    setLoading(true);\n    const { data, error } = await supabase.storage.from('photos').list();\n    if (error) {\n      setError('Fehler beim Laden der Fotos.');\n      setPhotos([]);\n    } else {\n      const photoUrls = data.map(file => {\n        const { data: { publicUrl } } = supabase.storage.from('photos').getPublicUrl(file.name);\n        return { ...file, publicUrl };\n      });\n      setPhotos(photoUrls);\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchPhotos();\n  }, [fetchPhotos]);\n\n  const handleUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const fileName = `${Date.now()}_${file.name}`;\n    const { error: uploadError } = await supabase.storage\n      .from('photos')\n      .upload(fileName, file);\n\n    if (uploadError) {\n      setError('Fehler beim Hochladen des Fotos.');\n    } else {\n      sendNotification('Neues Foto in der Galerie', {\n        body: `${user.name} hat ein neues Foto hochgeladen.`,\n      });\n      fetchPhotos();\n    }\n  };\n\n  return (\n    <div className=\"photo-gallery-container\">\n      <h2>Fotogalerie</h2>\n      <div className=\"upload-section\">\n        <label htmlFor=\"photo-upload\" className=\"upload-button\">Foto hochladen</label>\n        <input id=\"photo-upload\" type=\"file\" onChange={handleUpload} accept=\"image/*\" />\n      </div>\n\n      {error && <p className=\"error-message\">{error}</p>}\n\n      {loading ? (\n        <p>Lade Fotos...</p>\n      ) : (\n        <div className=\"photo-grid\">\n          {photos.map(photo => (\n            <div key={photo.id} className=\"photo-item\">\n              <img src={photo.publicUrl} alt=\"\" />\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}